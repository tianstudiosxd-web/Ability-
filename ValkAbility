-- Universal Roblox Ability Script
-- Walkspeed, Infinite Jump, Infinite Stamina, No-Clip, Anti-Knockback & More

local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- Variables
local currentSpeed = 16
local infiniteJumpEnabled = false
local infiniteHealthEnabled = false
local autoCollectEnabled = false
local antiKnockbackEnabled = false
local noClipEnabled = false
local isMinimized = false

-- GUI Creation
local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local TopBar = Instance.new("Frame")
local TitleLabel = Instance.new("TextLabel")
local MinimizeButton = Instance.new("TextButton")
local ExitButton = Instance.new("TextButton")
local ScrollFrame = Instance.new("ScrollingFrame")
local WalkspeedLabel = Instance.new("TextLabel")
local SpeedDisplay = Instance.new("TextLabel")
local MinusButton = Instance.new("TextButton")
local PlusButton = Instance.new("TextButton")
local InfiniteJumpLabel = Instance.new("TextLabel")
local InfiniteJumpButton = Instance.new("TextButton")
local InfiniteHealthLabel = Instance.new("TextLabel")
local InfiniteHealthButton = Instance.new("TextButton")
local AutoCollectLabel = Instance.new("TextLabel")
local AutoCollectButton = Instance.new("TextButton")
local AntiKnockbackLabel = Instance.new("TextLabel")
local AntiKnockbackButton = Instance.new("TextButton")
local NoClipLabel = Instance.new("TextLabel")
local NoClipButton = Instance.new("TextButton")
local WarningLabel = Instance.new("TextLabel")
local MinimizedButton = Instance.new("TextButton")
local UICorner = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")

-- Properties
ScreenGui.Name = "AbilityGUI"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Main Frame (Lebih kecil dengan scroll)
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.5, -140, 0.5, -120)
MainFrame.Size = UDim2.new(0, 280, 0, 240)
MainFrame.Active = true
MainFrame.Draggable = true

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 10)
MainCorner.Parent = MainFrame

-- Top Bar
TopBar.Name = "TopBar"
TopBar.Parent = MainFrame
TopBar.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
TopBar.BorderSizePixel = 0
TopBar.Size = UDim2.new(1, 0, 0, 32)

local TopCorner = Instance.new("UICorner")
TopCorner.CornerRadius = UDim.new(0, 10)
TopCorner.Parent = TopBar

-- Title
TitleLabel.Name = "Title"
TitleLabel.Parent = TopBar
TitleLabel.BackgroundTransparency = 1
TitleLabel.Position = UDim2.new(0, 10, 0, 0)
TitleLabel.Size = UDim2.new(0.6, 0, 1, 0)
TitleLabel.Font = Enum.Font.Gotham
TitleLabel.Text = "Ability"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 15
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Minimize Button
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Parent = TopBar
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 170, 0)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Position = UDim2.new(1, -60, 0.5, -9)
MinimizeButton.Size = UDim2.new(0, 23, 0, 18)
MinimizeButton.Font = Enum.Font.Gotham
MinimizeButton.Text = "-"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 16

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 4)
MinCorner.Parent = MinimizeButton

-- Exit Button
ExitButton.Name = "ExitButton"
ExitButton.Parent = TopBar
ExitButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
ExitButton.BorderSizePixel = 0
ExitButton.Position = UDim2.new(1, -32, 0.5, -9)
ExitButton.Size = UDim2.new(0, 23, 0, 18)
ExitButton.Font = Enum.Font.Gotham
ExitButton.Text = "X"
ExitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ExitButton.TextSize = 13

local ExitCorner = Instance.new("UICorner")
ExitCorner.CornerRadius = UDim.new(0, 4)
ExitCorner.Parent = ExitButton

-- Scroll Frame (Canvas size lebih besar untuk scroll)
ScrollFrame.Name = "ScrollFrame"
ScrollFrame.Parent = MainFrame
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.Position = UDim2.new(0, 0, 0, 32)
ScrollFrame.Size = UDim2.new(1, 0, 1, -32)
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 400)
ScrollFrame.ScrollBarThickness = 5
ScrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 120)
ScrollFrame.BorderSizePixel = 0

-- Walkspeed Label
WalkspeedLabel.Name = "WalkspeedLabel"
WalkspeedLabel.Parent = ScrollFrame
WalkspeedLabel.BackgroundTransparency = 1
WalkspeedLabel.Position = UDim2.new(0, 15, 0, 10)
WalkspeedLabel.Size = UDim2.new(0, 100, 0, 20)
WalkspeedLabel.Font = Enum.Font.Gotham
WalkspeedLabel.Text = "Walkspeed:"
WalkspeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
WalkspeedLabel.TextSize = 13
WalkspeedLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Speed Display
SpeedDisplay.Name = "SpeedDisplay"
SpeedDisplay.Parent = ScrollFrame
SpeedDisplay.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
SpeedDisplay.BorderSizePixel = 0
SpeedDisplay.Position = UDim2.new(0, 15, 0, 32)
SpeedDisplay.Size = UDim2.new(0, 70, 0, 28)
SpeedDisplay.Font = Enum.Font.Gotham
SpeedDisplay.Text = tostring(currentSpeed)
SpeedDisplay.TextColor3 = Color3.fromRGB(255, 255, 255)
SpeedDisplay.TextSize = 15

local SpeedCorner = Instance.new("UICorner")
SpeedCorner.CornerRadius = UDim.new(0, 5)
SpeedCorner.Parent = SpeedDisplay

-- Minus Button
MinusButton.Name = "MinusButton"
MinusButton.Parent = ScrollFrame
MinusButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
MinusButton.BorderSizePixel = 0
MinusButton.Position = UDim2.new(0, 90, 0, 32)
MinusButton.Size = UDim2.new(0, 32, 0, 28)
MinusButton.Font = Enum.Font.Gotham
MinusButton.Text = "-"
MinusButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinusButton.TextSize = 18

local MinusCorner = Instance.new("UICorner")
MinusCorner.CornerRadius = UDim.new(0, 5)
MinusCorner.Parent = MinusButton

-- Plus Button
PlusButton.Name = "PlusButton"
PlusButton.Parent = ScrollFrame
PlusButton.BackgroundColor3 = Color3.fromRGB(70, 255, 70)
PlusButton.BorderSizePixel = 0
PlusButton.Position = UDim2.new(0, 127, 0, 32)
PlusButton.Size = UDim2.new(0, 32, 0, 28)
PlusButton.Font = Enum.Font.Gotham
PlusButton.Text = "+"
PlusButton.TextColor3 = Color3.fromRGB(255, 255, 255)
PlusButton.TextSize = 18

local PlusCorner = Instance.new("UICorner")
PlusCorner.CornerRadius = UDim.new(0, 5)
PlusCorner.Parent = PlusButton

-- Infinite Jump
InfiniteJumpLabel.Name = "InfiniteJumpLabel"
InfiniteJumpLabel.Parent = ScrollFrame
InfiniteJumpLabel.BackgroundTransparency = 1
InfiniteJumpLabel.Position = UDim2.new(0, 15, 0, 68)
InfiniteJumpLabel.Size = UDim2.new(0, 100, 0, 20)
InfiniteJumpLabel.Font = Enum.Font.Gotham
InfiniteJumpLabel.Text = "Infinite Jump:"
InfiniteJumpLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
InfiniteJumpLabel.TextSize = 13
InfiniteJumpLabel.TextXAlignment = Enum.TextXAlignment.Left

InfiniteJumpButton.Name = "InfiniteJumpButton"
InfiniteJumpButton.Parent = ScrollFrame
InfiniteJumpButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
InfiniteJumpButton.BorderSizePixel = 0
InfiniteJumpButton.Position = UDim2.new(0, 15, 0, 90)
InfiniteJumpButton.Size = UDim2.new(0, 70, 0, 28)
InfiniteJumpButton.Font = Enum.Font.Gotham
InfiniteJumpButton.Text = "OFF"
InfiniteJumpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
InfiniteJumpButton.TextSize = 13

local JumpCorner = Instance.new("UICorner")
JumpCorner.CornerRadius = UDim.new(0, 5)
JumpCorner.Parent = InfiniteJumpButton

-- Infinite Health
InfiniteHealthLabel.Name = "InfiniteHealthLabel"
InfiniteHealthLabel.Parent = ScrollFrame
InfiniteHealthLabel.BackgroundTransparency = 1
InfiniteHealthLabel.Position = UDim2.new(0, 15, 0, 126)
InfiniteHealthLabel.Size = UDim2.new(0, 120, 0, 20)
InfiniteHealthLabel.Font = Enum.Font.Gotham
InfiniteHealthLabel.Text = "Infinite Health:"
InfiniteHealthLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
InfiniteHealthLabel.TextSize = 13
InfiniteHealthLabel.TextXAlignment = Enum.TextXAlignment.Left

InfiniteHealthButton.Name = "InfiniteHealthButton"
InfiniteHealthButton.Parent = ScrollFrame
InfiniteHealthButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
InfiniteHealthButton.BorderSizePixel = 0
InfiniteHealthButton.Position = UDim2.new(0, 15, 0, 148)
InfiniteHealthButton.Size = UDim2.new(0, 70, 0, 28)
InfiniteHealthButton.Font = Enum.Font.Gotham
InfiniteHealthButton.Text = "OFF"
InfiniteHealthButton.TextColor3 = Color3.fromRGB(255, 255, 255)
InfiniteHealthButton.TextSize = 13

local HealthCorner = Instance.new("UICorner")
HealthCorner.CornerRadius = UDim.new(0, 5)
HealthCorner.Parent = InfiniteHealthButton

-- Auto Collect
AutoCollectLabel.Name = "AutoCollectLabel"
AutoCollectLabel.Parent = ScrollFrame
AutoCollectLabel.BackgroundTransparency = 1
AutoCollectLabel.Position = UDim2.new(0, 15, 0, 184)
AutoCollectLabel.Size = UDim2.new(0, 100, 0, 20)
AutoCollectLabel.Font = Enum.Font.Gotham
AutoCollectLabel.Text = "Auto Collect:"
AutoCollectLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoCollectLabel.TextSize = 13
AutoCollectLabel.TextXAlignment = Enum.TextXAlignment.Left

AutoCollectButton.Name = "AutoCollectButton"
AutoCollectButton.Parent = ScrollFrame
AutoCollectButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
AutoCollectButton.BorderSizePixel = 0
AutoCollectButton.Position = UDim2.new(0, 15, 0, 206)
AutoCollectButton.Size = UDim2.new(0, 70, 0, 28)
AutoCollectButton.Font = Enum.Font.Gotham
AutoCollectButton.Text = "OFF"
AutoCollectButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoCollectButton.TextSize = 13

local CollectCorner = Instance.new("UICorner")
CollectCorner.CornerRadius = UDim.new(0, 5)
CollectCorner.Parent = AutoCollectButton

-- Anti-Knockback
AntiKnockbackLabel.Name = "AntiKnockbackLabel"
AntiKnockbackLabel.Parent = ScrollFrame
AntiKnockbackLabel.BackgroundTransparency = 1
AntiKnockbackLabel.Position = UDim2.new(0, 15, 0, 242)
AntiKnockbackLabel.Size = UDim2.new(0, 120, 0, 20)
AntiKnockbackLabel.Font = Enum.Font.Gotham
AntiKnockbackLabel.Text = "Anti-Knockback:"
AntiKnockbackLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
AntiKnockbackLabel.TextSize = 13
AntiKnockbackLabel.TextXAlignment = Enum.TextXAlignment.Left

AntiKnockbackButton.Name = "AntiKnockbackButton"
AntiKnockbackButton.Parent = ScrollFrame
AntiKnockbackButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
AntiKnockbackButton.BorderSizePixel = 0
AntiKnockbackButton.Position = UDim2.new(0, 15, 0, 264)
AntiKnockbackButton.Size = UDim2.new(0, 70, 0, 28)
AntiKnockbackButton.Font = Enum.Font.Gotham
AntiKnockbackButton.Text = "OFF"
AntiKnockbackButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AntiKnockbackButton.TextSize = 13

local KnockbackCorner = Instance.new("UICorner")
KnockbackCorner.CornerRadius = UDim.new(0, 5)
KnockbackCorner.Parent = AntiKnockbackButton

-- No-Clip
NoClipLabel.Name = "NoClipLabel"
NoClipLabel.Parent = ScrollFrame
NoClipLabel.BackgroundTransparency = 1
NoClipLabel.Position = UDim2.new(0, 15, 0, 300)
NoClipLabel.Size = UDim2.new(0, 100, 0, 20)
NoClipLabel.Font = Enum.Font.Gotham
NoClipLabel.Text = "No-Clip:"
NoClipLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
NoClipLabel.TextSize = 13
NoClipLabel.TextXAlignment = Enum.TextXAlignment.Left

NoClipButton.Name = "NoClipButton"
NoClipButton.Parent = ScrollFrame
NoClipButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
NoClipButton.BorderSizePixel = 0
NoClipButton.Position = UDim2.new(0, 15, 0, 322)
NoClipButton.Size = UDim2.new(0, 70, 0, 28)
NoClipButton.Font = Enum.Font.Gotham
NoClipButton.Text = "OFF"
NoClipButton.TextColor3 = Color3.fromRGB(255, 255, 255)
NoClipButton.TextSize = 13

local NoClipCorner = Instance.new("UICorner")
NoClipCorner.CornerRadius = UDim.new(0, 5)
NoClipCorner.Parent = NoClipButton

-- Warning Label
WarningLabel.Name = "WarningLabel"
WarningLabel.Parent = ScrollFrame
WarningLabel.BackgroundTransparency = 1
WarningLabel.Position = UDim2.new(0, 15, 0, 360)
WarningLabel.Size = UDim2.new(1, -30, 0, 18)
WarningLabel.Font = Enum.Font.Gotham
WarningLabel.Text = ""
WarningLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
WarningLabel.TextSize = 11
WarningLabel.Visible = false

-- Minimized Button
MinimizedButton.Name = "MinimizedButton"
MinimizedButton.Parent = ScreenGui
MinimizedButton.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
MinimizedButton.BorderSizePixel = 0
MinimizedButton.Position = UDim2.new(0.5, -60, 0, 10)
MinimizedButton.Size = UDim2.new(0, 120, 0, 40)
MinimizedButton.Font = Enum.Font.Gotham
MinimizedButton.Text = "Ability"
MinimizedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizedButton.TextSize = 16
MinimizedButton.Visible = false
MinimizedButton.Active = true
MinimizedButton.Draggable = true

UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = MinimizedButton

UIStroke.Thickness = 2
UIStroke.Parent = MinimizedButton

-- RGB Animation
spawn(function()
    while true do
        for hue = 0, 1, 0.01 do
            UIStroke.Color = Color3.fromHSV(hue, 1, 1)
            wait(0.03)
        end
    end
end)

-- Functions
local function updateSpeed()
    SpeedDisplay.Text = tostring(currentSpeed)
end

local function showWarning(message)
    WarningLabel.Text = message
    WarningLabel.Visible = true
    wait(2)
    WarningLabel.Visible = false
end

-- Auto Apply Walkspeed
RunService.Heartbeat:Connect(function()
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChild("Humanoid")
        if humanoid and humanoid.WalkSpeed ~= currentSpeed then
            humanoid.WalkSpeed = currentSpeed
        end
        
        -- Infinite Health (Only Health, no stamina)
        if infiniteHealthEnabled and humanoid then
            humanoid.Health = humanoid.MaxHealth
        end
        
        -- Anti-Knockback
        if antiKnockbackEnabled then
            local hrp = character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.Anchored = false
                local bodyVelocity = hrp:FindFirstChild("BodyVelocity") or hrp:FindFirstChild("BodyPosition")
                if bodyVelocity then
                    bodyVelocity:Destroy()
                end
            end
        end
    end
end)

-- No-Clip System
RunService.Stepped:Connect(function()
    if noClipEnabled then
        local character = player.Character
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end
end)

-- Auto Collect System
spawn(function()
    while wait(0.1) do
        if autoCollectEnabled then
            local character = player.Character
            if character then
                local hrp = character:FindFirstChild("HumanoidRootPart")
                if hrp then
                    for _, obj in pairs(workspace:GetDescendants()) do
                        if obj:IsA("TouchTransmitter") or (obj:IsA("Part") and obj.Name:lower():find("coin")) or (obj:IsA("Part") and obj.Name:lower():find("collect")) then
                            pcall(function()
                                if obj.Parent then
                                    firetouchinterest(hrp, obj, 0)
                                    firetouchinterest(hrp, obj, 1)
                                end
                            end)
                        end
                    end
                end
            end
        end
    end
end)

-- Button Functions
PlusButton.MouseButton1Click:Connect(function()
    if currentSpeed < 100 then
        currentSpeed = currentSpeed + 1
        updateSpeed()
    else
        showWarning("Cannot be more than 100")
    end
end)

MinusButton.MouseButton1Click:Connect(function()
    if currentSpeed > 1 then
        currentSpeed = currentSpeed - 1
        updateSpeed()
    end
end)

InfiniteJumpButton.MouseButton1Click:Connect(function()
    infiniteJumpEnabled = not infiniteJumpEnabled
    if infiniteJumpEnabled then
        InfiniteJumpButton.Text = "ON"
        InfiniteJumpButton.BackgroundColor3 = Color3.fromRGB(70, 255, 70)
    else
        InfiniteJumpButton.Text = "OFF"
        InfiniteJumpButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
    end
end)

InfiniteHealthButton.MouseButton1Click:Connect(function()
    infiniteHealthEnabled = not infiniteHealthEnabled
    if infiniteHealthEnabled then
        InfiniteHealthButton.Text = "ON"
        InfiniteHealthButton.BackgroundColor3 = Color3.fromRGB(70, 255, 70)
    else
        InfiniteHealthButton.Text = "OFF"
        InfiniteHealthButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
    end
end)

AutoCollectButton.MouseButton1Click:Connect(function()
    autoCollectEnabled = not autoCollectEnabled
    if autoCollectEnabled then
        AutoCollectButton.Text = "ON"
        AutoCollectButton.BackgroundColor3 = Color3.fromRGB(70, 255, 70)
    else
        AutoCollectButton.Text = "OFF"
        AutoCollectButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
    end
end)

AntiKnockbackButton.MouseButton1Click:Connect(function()
    antiKnockbackEnabled = not antiKnockbackEnabled
    if antiKnockbackEnabled then
        AntiKnockbackButton.Text = "ON"
        AntiKnockbackButton.BackgroundColor3 = Color3.fromRGB(70, 255, 70)
    else
        AntiKnockbackButton.Text = "OFF"
        AntiKnockbackButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
    end
end)

NoClipButton.MouseButton1Click:Connect(function()
    noClipEnabled = not noClipEnabled
    if noClipEnabled then
        NoClipButton.Text = "ON"
        NoClipButton.BackgroundColor3 = Color3.fromRGB(70, 255, 70)
    else
        NoClipButton.Text = "OFF"
        NoClipButton.BackgroundColor3 = Color3.fromRGB(255, 70, 70)
        local character = player.Character
        if character then
            for _, part in pairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end)

MinimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    MainFrame.Visible = not isMinimized
    MinimizedButton.Visible = isMinimized
end)

MinimizedButton.MouseButton1Click:Connect(function()
    isMinimized = false
    MainFrame.Visible = true
    MinimizedButton.Visible = false
end)

ExitButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Infinite Jump Logic
UserInputService.JumpRequest:Connect(function()
    if infiniteJumpEnabled then
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChild("Humanoid")
            if humanoid then
                humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end
    end
end)

-- Character Reset Handler
player.CharacterAdded:Connect(function(character)
    local humanoid = character:WaitForChild("Humanoid")
    wait(0.1)
    humanoid.WalkSpeed = currentSpeed
end)

-- Initial Setup
updateSpeed()
print("Ability GUI Loaded Successfully with All Features!")
